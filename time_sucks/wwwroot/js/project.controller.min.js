angular.module("time").controller("ProjectCtrl",["$scope","$http","$routeParams","$location","usSpinnerService",function(n,t,i,r){n.loaded=!1;n.config={};n.config.showInactiveGroups=!1;n.load=function(){var t,u,f;n.projectID=i.ID;n.projectID||r.path("/courses");n.projectID==="1"?n.project={projectName:"PHP Game",projectID:1,isActive:!0,groups:{1:{groupID:1,groupName:"Group Awesome",isActive:!0,users:{1:{userID:1,firstName:"Logan",lastName:"Brown",time:{1:{timeID:1,hours:"3",isEdited:!1}}},2:{userID:2,firstName:"Rizwan",lastName:"Mohammed",time:{2:{timeID:2,hours:"4",isEdited:!1}}},3:{userID:3,firstName:"Skylar",lastName:"Olsen",time:{3:{timeID:3,hours:"5",isEdited:!1}}}}},2:{groupID:2,groupName:"Group One Thing",isActive:!0,users:{1:{userID:1,firstName:"Logan",lastName:"Brown",time:{4:{timeID:4,hours:"1",isEdited:!1}}},2:{userID:2,firstName:"Rizwan",lastName:"Mohammed",time:{5:{timeID:5,hours:"1",isEdited:!1}}},3:{userID:3,firstName:"Skylar",lastName:"Olsen",time:{6:{timeID:6,hours:"1",isEdited:!1}}}}},3:{groupID:3,groupName:"Group Other Thing",isActive:!0,users:{1:{userID:1,firstName:"Logan",lastName:"Brown",time:{7:{timeID:7,hours:"2",isEdited:!1}}},2:{userID:2,firstName:"Rizwan",lastName:"Mohammed",time:{8:{timeID:8,hours:"2",isEdited:!1}}},3:{userID:3,firstName:"Skylar",lastName:"Olsen",time:{9:{timeID:9,hours:"2",isEdited:!1}}}}},4:{groupID:4,groupName:"Group Four (Inactive)",isActive:!1,users:{1:{userID:1,firstName:"Logan",lastName:"Brown",time:{10:{timeID:10,hours:"2",isEdited:!1}}},2:{userID:2,firstName:"Rizwan",lastName:"Mohammed",time:{11:{timeID:11,hours:"2",isEdited:!1}}},3:{userID:3,firstName:"Skylar",lastName:"Olsen",time:{12:{timeID:12,hours:"2",isEdited:!1}}}}}}}:(toastr.info("No dummy data for this project."),window.history.back());n.createGroup=function(){toastr.info("Attempted to create a group - enable REST endpoint")};n.saveProject=function(){toastr.info("Attempted to save a project - enable REST endpoint")};t={datasets:[{data:[],backgroundColor:["#2C3E50","#3498DB","#18BC9C","#F39C12","#e83e8c","#6610f2","#fd7e14","#E74C3C","#6f42c1","#95a5a6","#2C3E50","#3498DB","#18BC9C","#F39C12","#e83e8c","#6610f2","#fd7e14","#E74C3C","#6f42c1","#95a5a6","#2C3E50","#3498DB","#18BC9C","#F39C12","#e83e8c","#6610f2","#fd7e14","#E74C3C","#6f42c1","#95a5a6",]}],labels:[]};n.setData=function(){var i,f,r,u;if(n.project&&n.project.groups){t.datasets[0].data=[];t.labels=[];for(i in n.project.groups)if(i=n.project.groups[i],i.isActive||n.config.showInactiveGroups){f=0;for(r in i.users){r=i.users[r];for(u in r.time)u=r.time[u],f+=Number(u.hours)}t.datasets[0].data.push(f);t.labels.push(i.groupName)}}};n.setData();u=$("#projectHours");f=new Chart(u,{type:"pie",data:t});n.updateChart=function(){n.setData();f.update()};n.loaded=!0};n.$parent.user&&n.$parent.user!==""?n.load():t.get("/Home/CheckSession").then(function(t){n.$parent.user=t.data;n.$parent.loaded=!0;n.load()},function(){toastr.error("Not logged in.");r.path("/login")})}]);